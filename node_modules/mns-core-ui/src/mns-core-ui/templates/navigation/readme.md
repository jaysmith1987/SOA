# Navigation

## JavaScript
The JavaScript is structured in an adaptive manner with mobile, tablet and desktop split out into separate files.    
The mobile and desktop are tied together in a responsive manner by the js/index.js file.

## CSS
Similarly, the CSS is structured in an adaptive manner. CSS is split into common (all devices), desktop, tablet, mobile.    
You can implement the navigation in a responsive manner as follows:

```CSS

$mns-core-ui-images-dir: '/assets/images';

@import '../../base';
@import 'sass/variables';
@import 'sass/device';

/*****************************
  COMMON
*****************************/
@import 'sass/common';

/*****************************
  DESKTOP
*****************************/
@include desktop {
  @import 'sass/desktop';
}

/*****************************
  TABLET
*****************************/
@include tablet {
  @import 'sass/tablet';
}

/*****************************
  PHONE
*****************************/
@include phone {
  @import 'sass/mobile';

  @include mobile-nav($mobile-hide--sibling-for-hamburger: '.menu__mobile--hide__sibling-for-hamburger', $mobile-hide--sibling-for-menu-items: '.menu__mobile--hide__sibling-for-menu-items');
}
```

## HTML

This is a progressive navigation. 
- HTML only: It's viewable as a HTML hierarchy.
- Add CSS: To gain hover functionality on desktop and hamburger slide menu on mobile.
- Add JavaScript: collapses accordion on level 3 and closes level 3 when leaving the view.

### Root menu radio button

  This radio button needs to be at the DOM level where:
  - both the mobile hamburger button's DOM parent
  - and the navigation items's DOM parent
  - are DOM siblings
  These siblings need to have the classes 'menu__mobile--hide__sibling-for-hamburger'
  and 'menu__mobile--hide__sibling-for-menu-items' also defined on them.
  When this radio is checked then the menu is hidden
  
  See [rootMenuHide.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/rootMenuHide.hbs)

```html
<input type="radio" id="menu__mobile--hide" name="menu" aria-hidden="true" hidden checked/>
```
### Hamburger button 

The class `menu__mobile--hide__sibling-for-hamburger` needs to be on the sibling element to the
`menu__mobile--hide` radio button

```html
<header class="menu__mobile--hide__sibling-for-hamburger">
  <ul class="example-header">
  
    <!-- These two labels allow the hamburger menu to toggle the mobile menu -->
    <li class="menu__hamburger" hidden>
      <label for="menu__mobile--hide" class="icon--menu menu__button--hide-menu" role="button">
        <i class="acc__text">menu</i>
      </label>
      <label for="menu__mobile-level1--show" class="icon--menu menu__button--show-level1" role="button">
        <i class="acc__text">menu</i>
      </label>
    </li>
    
  </ul>
</header>
```

### Mobile overlay

The overlay label is the grey transparent overly that appears when the mobile menu is shown 
Clicking this overlay will close the menu. 

See [mobileOverlay.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/mobileOverlay.hbs)

```html
<label for="menu__mobile--hide" class="menu__mobile-level1__overlay"></label>
```

### Navigation items
 
The class `menu__mobile--hide__sibling-for-menu-items` needs to be on the sibling element to the
`menu__mobile--hide` radio button

see [nav.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/nav.hbs)

```html
<div class="menu__mobile--hide__sibling-for-menu-items nav__wrapper">
  <nav role="navigation">
  
    <!--
      When this radio is checked then the level 1 menu is shown.
      The corresponding label that selects this radio button is show in the page header
      as the hamburger icon on mobile.
    -->
    <input type="radio" id="menu__mobile-level1--show" name="menu" aria-hidden="true" hidden/>
    <div class="nav">
    
      <!-- Level 1 items are rendered here -->
      {{> templates/navigation/levels/level1 categoryList}}          

      <!-- this is where any additional html can be rendered information -->
      {{{ additionalHTML }}}
    </div>
  </nav>
</div>
```

### Level 1 Navigation

see [level1.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/levels/level1.hbs)

```html
<ul class="nav__level1-panel">
  <li>
  
    <!--
      Radio button ID must be unique and should follow the format
      `menu__mobile-level2__[name of level 1 item]--show`
       This radio button will show and hide the `.nav__content` for mobile
    -->
    <input class="menu__mobile-level2--show" type="radio" name="menu"
           id="menu__mobile-level2__inspireme--show"
           aria-hidden="true" hidden/>
           
    <!-- Link is shown on the desktop -->
    <a href="/c/style-and-living"><h1>Inspire Me</h1></a>
    
    <!--
      Label is shown on the mobile
      This label selects the radio button that shows the level 2 and 3 menu on mobile
      The `for` attribute must correspond to the ID of the corresponding radio button
    -->
    <label class="menu__mobile-level2__label" for="menu__mobile-level2__inspireme--show" role="button"
           aria-hidden="true" hidden>Inspire
      Me</label>
      
    <!-- LEVEL 2 AND LEVEL 3 NAVIGATION -->
    <!--
      `.nav__content` is shown on desktop when a level 1 item is in hover state
    -->
    <ul class="nav__content">
    
      <!-- Mobile menu back button -->
      <li class="menu__mobile-level2--back" aria-hidden="true" hidden>
        <label for="menu__mobile-level1--show" role="button"></label>
        <span>Inspire Me</span>
      </li>
      
      <li>
        <!-- this is where the menu content goes -->        
        <!-- LEVEL 2 and LEVEL 3 -->
        {{> templates/navigation/levels/level2 this}}
      </li>
    </ul>
    <label class="menu__mobile-level2__overlay" for="menu__mobile-level1--show"></label>
  </li>
  
  
  <!-- Pattern repeats -->
  
</ul>
```

### Level 2 and Level 3

see     
[columns.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/levels/columns.hbs)   
[level2and3.hbs](https://github.com/DigitalInnovation/mns-core-ui/blob/master/src/mns-core-ui/templates/navigation/hbs/levels/level2and3.hbs)

```html
<ul class="nav__content-layout nav__content-items">
  <!-- Each `li` represents a column in the desktop layout -->
  <li>
  
    <!--
      Checkbox ID must be unique and should follow the format
      `menu__mobile-level3__[name of level 1 item]--[name of level 2 item]`
       This checkbox will show and hide the `.nav__content-group` for mobile
    -->
    <input class="menu__mobile-level3" type="checkbox" id="menu__mobile-level3__10-beauty-box" hidden/>

    <!-- LEVEL 2 -->
    <h2><label for="menu__mobile-level3__10-beauty-box">£10 Beauty Box</label></h2>

    <!-- LEVEL 3 -->
    <ul class="nav__content-group">
      <li>
        <a href="/s/beauty/beauty-box?intid=WW_GNAV_1_bb">£10 Beauty Box when you spend £40 - T&amp;Cs
          apply
        </a>
      </li>
    </ul>

    <!-- the layout pattern repeats as above -->
    
  </li>
</ul>
```

## AEM

HTML Content from AEM for the style and living and the featured content spots need to be structured in the following way. 

[Current navigation does not comply to these requirements, so there needs to be work done in AEM to provide the right markup]
 
### Featured
It is assumed that there are 2 columns for the featured content spot.

_**Note:**_ No inline styles should be used.

```html
<!-- Featured heading -->
<h2>Featured</h2>

<!-- each div creates a column -->
<div>
  <a href="/s/lingerie/lingerie-guides/bra-fit-guide?intid=LG_topnav__DLP_contentslot_1_img"
     data-analyticsid="#_imageURL"><img
    src="//asset1.marksandspencer.com/is/image/mands/dad6fcc855dfe99d32e0067657b46a6dafe20613" class="lazy loader"
    data-original="//asset1.marksandspencer.com/is/image/mands/dad6fcc855dfe99d32e0067657b46a6dafe20613"
    title="Model in pink bra" alt="Model in pink bra"></a>
  <div class="copy">
    <h3>THE BRA FIT EVENT</h3>
    <p>Over 80% of women wear the wrong size bra. Make sure yours is right for you</p>
    <p>
      <a href="/s/lingerie/lingerie-guides/bra-fit-guide?intid=LG_topnav__DLP_contentslot_1_txt_1"
         title="Find your perfect bral"><span>Find your perfect fit</span></a>
    </p>
  </div>
</div>

<!-- another column -->
<div>
  <a href="/s/lingerie/lingerie-spend-and-save?intid=LG_topnav__DLP_contentslot_2_img_1" data-analyticsid="#_imageURL">
    <img src="//asset2.marksandspencer.com/is/image/mands/43ec480fc8b9a743660eb82849662ebc061f8f43"
         class="lazy loader"
         data-original="//asset2.marksandspencer.com/is/image/mands/43ec480fc8b9a743660eb82849662ebc061f8f43"
         title="Spend and save £10 off £50 use code LINGERIESAVE"
         alt="Spend and save £10 off £50 use code LINGERIESAVE"></a>
  <div class="copy">
    <h3>SPEND AND SAVE</h3>
    <p>Spend £50 on lingerie and save £10. Simply use the code LINGERIESAVE at the checkout</p>
    <p>
      <a title="Shop spend and save offer"
         href="/s/lingerie/lingerie-spend-and-save?intid=LG_topnav__DLP_contentslot_2_txt_1"><span>Shop spend and save offer</span>
      </a>
    </p>
    <p>
      <a title="Shop bras" href="/l/lingerie/bras?intid=LG_topnav__DLP_contentslot_2_txt_2"><span>Shop bras</span></a>
    </p>
  </div>
</div>

```

### Style and Living

```html
<!-- each div creates a column -->
<div>
  <p>
    <a href="/c/style-and-living" class="style-and-living__logo" title="Style and Living"><span
      class="visually-hidden">Style &amp; Living</span></a>
  </p>
  <div class="copy">
    <p>Discover Style &amp; Living, your destination for ideas, inspiration and advice for you, your family and your
      home.</p>
    <p>
      <a href="/c/style-and-living">Read all features</a>
    </p>
  </div>
</div>

<!-- another column -->
<div>
  <h2>
    <a href="/c/style-and-living/editors-pick">EDITORS PICK</a>
  </h2>
  <div>
    <a href="/c/style-and-living/new-david-gandy-towelling-polo-shirt?intid=SL_HUB_gnav_ep_img"
       data-analyticsid="#_imageURL" class="">
      <img
        src="//asset1.cxnmarksandspencer.com/is/image/mandstest/4bda8384aed299002552e7833855ce5c808ea579"
        class="lazy loader"
        data-original="//asset1.cxnmarksandspencer.com/is/image/mandstest/4bda8384aed299002552e7833855ce5c808ea579"
        title="David Gandy’s poolside polo" alt="David Gandy’s poolside polo"/></a>
    <div class="copy">
      <h3>DAVID GANDY’S POOLSIDE<br> POLO</h3>
      <p>Suave Sixties style perfect for summer</p>
      <p>
        <a href="/c/style-and-living/new-david-gandy-towelling-polo-shirt?intid=SL_HUB_gnav_ep_txt">
          <span>READ &amp; SHOP</span>
        </a>
      </p>
    </div>
  </div>
</div>
```
